<div class="dashboard-page">
  <div class="page-header">
    <div class="header-left">
      <h2>Sales Overview</h2>
      <p class="subtitle">Rychlý přehled tržeb a výkonu produktů</p>
    </div>

    <button mat-raised-button class="glass-button">
      <mat-icon>file_upload</mat-icon>
      <span>Import CSV</span>
    </button>
  </div>

  <div class="kpi-grid">
    <mat-card class="kpi-card">
      <div class="kpi-label">Celkové tržby</div>
      <div class="kpi-value">
        {{ totalRevenue | currency:'CZK':'symbol':'1.0-0' }}
      </div>
      <div class="kpi-trend positive">
        <mat-icon>trending_up</mat-icon>
        <span>+12 %</span>
      </div>
    </mat-card>

    <mat-card class="kpi-card">
      <div class="kpi-label">Počet objednávek</div>
      <div class="kpi-value">{{ totalOrders }}</div>
      <div class="kpi-trend neutral">
        <mat-icon>horizontal_rule</mat-icon>
        <span>Stabilní</span>
      </div>
    </mat-card>

    <mat-card class="kpi-card">
      <div class="kpi-label">Průměrný košík</div>
      <div class="kpi-value">
        {{ avgOrderValue | currency:'CZK' }}
      </div>
      <div class="kpi-trend positive">
        <mat-icon>arrow_upward</mat-icon>
        <span>+5 %</span>
      </div>
    </mat-card>
  </div>

  <div class="content-grid">
    <mat-card class="panel-card">
      <div class="panel-header">
        <h3>Tržby podle dne</h3>
      </div>

      <apx-chart
        [series]="revenueByDayChart?.series"
        [chart]="revenueByDayChart?.chart"
        [xaxis]="revenueByDayChart?.xaxis"
        [dataLabels]="revenueByDayChart?.dataLabels"
        [stroke]="revenueByDayChart?.stroke"
        [plotOptions]="revenueByDayChart?.plotOptions"
        [title]="revenueByDayChart?.title">
      </apx-chart>
    </mat-card>

    <mat-card class="panel-card">
      <div class="panel-header">
        <h3>Top produkty podle tržeb</h3>
      </div>

      <apx-chart
        [series]="topProductsChart?.series"
        [chart]="topProductsChart?.chart"
        [xaxis]="topProductsChart?.xaxis"
        [dataLabels]="topProductsChart?.dataLabels"
        [stroke]="topProductsChart?.stroke"
        [plotOptions]="topProductsChart?.plotOptions"
        [title]="topProductsChart?.title">
      </apx-chart>
    </mat-card>

    <mat-card class="panel-card table-card">
      <div class="panel-header">
        <h3>Detailní prodeje</h3>
      </div>

      <table mat-table [dataSource]="sales" class="glass-table">
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Datum</th>
          <td mat-cell *matCellDef="let s">{{ s.date | date:'yyyy-MM-dd' }}</td>
        </ng-container>

        <ng-container matColumnDef="product">
          <th mat-header-cell *matHeaderCellDef>Produkt</th>
          <td mat-cell *matCellDef="let s">{{ s.product }}</td>
        </ng-container>

        <ng-container matColumnDef="revenue">
          <th mat-header-cell *matHeaderCellDef>Tržba</th>
          <td mat-cell *matCellDef="let s">
            {{ (s.quantity * s.price) | currency:'CZK' }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </mat-card>
  </div>
</div>
