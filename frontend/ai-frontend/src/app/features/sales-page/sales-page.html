<div class="sales-page">
  <div class="page-header">
    <h2>Prodeje</h2>
    <p class="subtitle">Detailn√≠ evidence prodej≈Ø podle produktu a data</p>
  </div>

  <!-- üåÄ Loader -->
  <ng-template #loadingState>
    <div class="loading-state">
      <mat-progress-spinner mode="indeterminate" diameter="42"></mat-progress-spinner>
      <span>Naƒç√≠t√°m prodeje‚Ä¶</span>
    </div>
  </ng-template>

  <!-- üí° Pokud je≈°tƒõ naƒç√≠t√° -->
  <div *ngIf="loading; else dataOrEmpty"></div>

  <!-- üìå Data nebo empty state -->
  <ng-template #dataOrEmpty>

    <!-- ‚ùå Kdy≈æ nejsou ≈æ√°dn√° data -->
    <div *ngIf="sales.length === 0" class="empty-state">
      <mat-icon>inventory_2</mat-icon>
      <p>≈Ω√°dn√© prodeje zat√≠m nejsou k dispozici.</p>
      <span class="hint">Nahrajte data ve str√°nce <strong>Import CSV</strong>.</span>
    </div>

    <!-- üìã Tabulka -->
    <div *ngIf="sales.length > 0" class="table-card">
      <table mat-table [dataSource]="sales" class="glass-table">

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Datum</th>
          <td mat-cell *matCellDef="let s">{{ s.date | date:'dd.MM.yyyy' }}</td>
        </ng-container>

        <ng-container matColumnDef="product">
          <th mat-header-cell *matHeaderCellDef>Produkt</th>
          <td mat-cell *matCellDef="let s">{{ s.product }}</td>
        </ng-container>

        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>Mno≈æstv√≠</th>
          <td mat-cell *matCellDef="let s">{{ s.quantity }}</td>
        </ng-container>

        <ng-container matColumnDef="sale_price">
          <th mat-header-cell *matHeaderCellDef>Cena/ks</th>
          <td mat-cell *matCellDef="let s">{{ s.sale_price | currency:'CZK' }}</td>
        </ng-container>

        <ng-container matColumnDef="revenue">
          <th mat-header-cell *matHeaderCellDef>Tr≈æba</th>
          <td mat-cell *matCellDef="let s">{{ s.revenue | currency:'CZK' }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>

  </ng-template>
</div>
